import{b as m,j as e,S as f,C as T,H as A,e as k,r as j,aI as L,aJ as R,aK as D,aL as E,aM as P,ah as p,aN as W,aO as B,aP as G,aQ as H,aR as N,T as c,aS as _,aT as C,aG as z,B as h,aU as F,aV as I,aW as K,aX as O,aY as U,c as $,aE as Q,D as V,aZ as Y,a_ as b,a$ as q,W as J}from"./index-66af4ed7.js";function M(){const r=m(o=>o.newInteraction.loading),s=m(o=>o.newInteraction.error),n=m(o=>o.newInteraction.AIResponse),i=n.certainty,t=n.advice,a=n.events,l=n.name,u=n.crush_chances;return{name:l,advice:t,events:a,crush_chances:u,certainty:i,isLoading:r,error:s}}function X({onSubmit:r,interactionInput:s,setInteractionInput:n}){const i=()=>{r(s)};return e.jsxs(f,{children:[e.jsx(T,{spacing:3,direction:"row",sx:{px:3,p:2,mb:3,borderRadius:2},children:e.jsx(A,{placeholder:"Tell us about your interaction...",sx:{width:"100%",fontSize:18,padding:3,borderRadius:2},onChange:t=>n(t.target.value),onKeyDown:t=>t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),i()),multiline:!0})}),e.jsx(k,{variant:"contained",sx:{paddingInline:"1rem",maxWidth:"fit-content",margin:"auto"},onClick:i,children:"Generate Response"})]})}function w({name:r,list:s,...n}){const[i,t]=j.useState([]);j.useEffect(()=>{t(s)},[s]);const a="Interactions Timeline",l=`Your Interactions with ${r}`;return e.jsxs(T,{...n,sx:{mt:2},children:[e.jsx(L,{title:a,subheader:l}),e.jsx(R,{sx:{m:2,pt:0,[`& .${D.root}:before`]:{flex:0,padding:0}},children:e.jsx(E,{children:i.map((u,o)=>e.jsx(P,{timeout:i.length*400,children:e.jsx(v,{item:u,lastTimeline:o===s.length-1})},u.id))})})]})}w.propTypes={list:p.array,subheader:p.string,title:p.string};function v({item:r,lastTimeline:s}){let{type:n,title:i,time:t}=r;return t||(t="unknown"),t=new Date(t),isNaN(t.getTime())&&(t="unknown"),e.jsxs(W,{children:[e.jsxs(B,{children:[e.jsx(G,{color:n==="friendly"&&"primary"||n==="flirty"&&"success"||n==="neutral"&&"info"||n==="negative"&&"error"||"info"}),s?null:e.jsx(H,{})]}),e.jsxs(N,{children:[e.jsx(c,{variant:"subtitle2",children:i}),e.jsxs(f,{children:[e.jsx(c,{variant:"caption",children:n}),e.jsx(c,{variant:"caption",sx:{color:"text.disabled"},children:t=="unknown"?"unknown time":_(t)})]})]})]})}v.propTypes={item:p.object,lastTimeline:p.bool};const Z=j.memo(function({crush_chances:s,certainty:n,name:i}){const a=C().palette.info;return e.jsx(z,{in:!0,timeout:2500,children:e.jsx(f,{children:e.jsxs(h,{sx:{mt:5,width:"40%",marginInline:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(c,{sx:{textAlign:"center",color:"text.secondary",mb:3},children:["Chance that ",i," is into you:"]}),e.jsx(F,{id:"gauge-chart3",nrOfLevels:30,colors:[a.lighter,a.darker],arcWidth:.2,percent:s,textColor:"black"}),e.jsxs(c,{sx:{textAlign:"center",color:"text.secondary",mb:3},children:["Confidence Level: ",n*100,"%"]})]})})})});function ee({name:r,isLoading:s,error:n,advice:i,crush_chances:t,certainty:a,events:l}){const u=C(),o=l.length>=2,g=a>=.6&&t>.1,y=n||i||"Please describe your interaction.";return e.jsxs(I,{container:!0,spacing:4,sx:{mt:1},children:[e.jsxs(I,{item:!0,xs:12,sm:12,md:o?8:12,children:[e.jsxs(h,{sx:{my:1,py:1,display:"flex",alignItems:"center"},children:[e.jsx(h,{maxWidth:"30px",children:s?e.jsx(K,{size:28}):e.jsx(O,{sx:{opacity:.6},src:"favicon/icon.png",alt:"photoURL"})}),e.jsx(h,{sx:{ml:2},children:e.jsx(c,{variant:"subtitle2",color:u.palette.primary.main,children:"CrushHub AI"})})]}),e.jsx(h,{fontSize:"1.1rem",children:e.jsx(U,{options:{strings:y,autoStart:!0,loop:!1,delay:1,cursor:""}})}),g&&e.jsx(Z,{crush_chances:t,certainty:a,name:r})]}),e.jsx(I,{item:!0,xs:12,sm:12,md:4,children:o&&e.jsx(w,{name:r,list:l.map(d=>({id:d.title+d.date,type:d.quality,title:d.title,time:d.date}))})})]})}function te(r){return r.replace(/\w\S*/g,function(s){return s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()})}function ne(){const r=$(),[s,n]=j.useState(""),{advice:i,error:t,isLoading:a,events:l,crush_chances:u,name:o,certainty:g}=M(),y=m(x=>x.user.isLoggedIn),d=m(x=>x.user.fname),S=()=>{const x=s.trim();if(s.length<40&&s!=="test"){b.error("Please describe your interactions in depth.");return}if(a)return b.info("Please wait for the current response to finish loading");r(q(x))};return e.jsxs(Q,{children:[e.jsxs(f,{children:[e.jsx(c,{sx:{color:"text.secondary",mb:2},children:y&&"Welcome back, "+te(d)+"!"}),e.jsx(c,{variant:"h3",sx:{mb:3},children:"Are they into you?"}),e.jsx(c,{sx:{color:"text.secondary",mb:3},children:"Tell our AI about your previous interactions and we will tell you if they are into you or not."}),e.jsx(X,{onSubmit:S,interactionInput:s,setInteractionInput:n}),e.jsx(V,{sx:{mt:5}}),e.jsx(ee,{isLoading:a,error:t,advice:i,events:l,crush_chances:u,certainty:g,name:o})]}),e.jsx(Y,{hideProgressBar:!0,autoClose:1500,theme:"dark"})]})}function ie(){return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:" CrushHub "})}),e.jsx(ne,{})]})}export{ie as default};
